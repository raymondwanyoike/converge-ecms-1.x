<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:c="http://java.sun.com/jstl/core" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" xmlns:a4j="http://richfaces.org/a4j" xmlns:rich="http://richfaces.org/rich" xmlns:tahrir="http://com.ferrycode.tahrir/tags" >
    <f:view locale="#{userSession.user.preferredLanguage}">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title><ui:insert name="title" />&#160;-&#160;#{i18n.Generic_APPLICATION_TITLE}</title>
        <link rel="shortcut icon" href="#{facesContext.externalContext.request.contextPath}/favicon.ico" />
        <link rel="stylesheet" href="#{facesContext.externalContext.request.contextPath}/themes/office/css/#{userSession.userLocale.htmldir}/template.css?version=#{common.buildNumber}" type="text/css" />
        <a4j:loadScript src="resource://jquery.js"/>
        <script type="text/javascript" src="#{facesContext.externalContext.request.contextPath}/scripts/windowutils.js"></script>
        <script type="text/javascript" src="#{facesContext.externalContext.request.contextPath}/scripts/domutils.js"></script>
        <script type="text/javascript" src="#{facesContext.externalContext.request.contextPath}/scripts/jquery.gritter.js"></script>
        <script type="text/javascript" src="#{facesContext.externalContext.request.contextPath}/scripts/jwplayer/jwplayer.js"></script>
        <ui:insert name="header" />
        <script type="text/javascript" >
            jQuery(document).ready(function () {
                jQuery('.active-links').click(function () {
                //Conditional states allow the dropdown box appear and disappear
                if (jQuery('#signin-dropdown').is(":visible")) {
                    jQuery('#signin-dropdown').hide()
                    jQuery('#session').removeClass('active'); // When the dropdown is not visible removes the class "active"
                } else {
                    // check u r not i NewsItem editing
                    if(!(jQuery("#frmNewsItem").length > 0)){
                        jQuery('#signin-dropdown').show()
                        jQuery('#session').addClass('active'); // When the dropdown is visible add class "active"
                    }
                }
                    return false;
            });
            //Allow to hide the dropdown box if you click anywhere on the document.
            jQuery('#signin-dropdown').click(function(e) {
            e.stopPropagation();
            });
            jQuery(document).click(function() {
                jQuery('#signin-dropdown').hide();
                jQuery('#session').removeClass('active');
                });
            });
        </script>
    </head>

    <body>        
        
		<tahrir:userProfileDropPanel id="userDropDpwnPanel" user="#{userSession.user}" />
       
        
		<!-- START |  ferrycode Tahrir Office Theme - Search + Logo  Part -->                
		<div id="logoSearchContainer">
			 <div id="logo" title="Tahrir" >
				<a href="#{facesContext.externalContext.request.contextPath}" title="Tahrir">
					<img src="#{facesContext.externalContext.request.contextPath}/themes/office/images/tahrir_logo.png" title="Tahrir" alt="Tahrir"/>
				</a>
			 </div>
			 <div id="search">
				<div class="moduleContent">
					<h:form id="srchFrm">
						<script>
							document.getElementById('srchFrm:searchType').value='type:Story';
						</script>
						<h:inputHidden id="searchType" value="#{sessionScope.searchType}" />
						<h:panelGrid style="width: 640px;">
							<h:column>
								<a4j:commandLink reRender="srchFrm"  styleClass="#{sessionScope.searchType=='type:Story' ? 'searchLinks_selected' : 'searchLinks' }" value="#{msgs.search_TYPE_STORY} |" onclick="document.getElementById('srchFrm:searchType').value='type:Story';" />
								<a4j:commandLink reRender="srchFrm"  styleClass="#{sessionScope.searchType=='type:Media' ? 'searchLinks_selected' : 'searchLinks' }" value=" #{msgs.search_TYPE_MEDIA}" onclick="document.getElementById('srchFrm:searchType').value='type:Media'" />
							</h:column>
							<h:column>
								<h:panelGrid columns="2" style="width: 100%" columnClasses="left,btnC">
									<h:inputText id="txtSearchKeyword" styleClass="text searchInput" value="#{sessionScope.searchKeyword}" title="" >

									</h:inputText>

									<h:commandLink  action="/search"   >
										<h:graphicImage  value="/themes/office/images/announcement/search_ar.gif" />
									</h:commandLink>

								</h:panelGrid>
							</h:column>

						</h:panelGrid>
					</h:form>
				</div>
			</div>
		</div>                                
		<!-- END |  ferrycode Tahrir Office Theme - Search + Logo Part -->
		
		<!-- START |  ferrycode Tahrir Office Theme - Menu  Part -->
        <div id="header">
            <div class="wrapper">  
                <!-- Menu Start -->
                
                    <div id="navigation">
                        <h:form id="navigationForm">
                            <ul>
                                <ui:repeat value="#{userSession.items}" var="menuItem">
                                    <li class="#{menuItem.active ? 'active' : '' }">
                                        <span>
                                            <h:commandLink action="#{menuItem.action}" value="#{i18n[menuItem.label]}" />
                                        </span>
                                    </li>
                                </ui:repeat>
                            </ul>
                        </h:form>
                    </div>
               
                <!-- Menu End -->
            </div>
        </div>
		<!-- END |  ferrycode Tahrir Office Theme - Menu  Part -->
		
        

        <div id="header_spacer"></div>
        <a name="top"></a>
        <ui:insert name="pageBody" />
        
        <!-- START |  ferrycode Tahrir Office Theme - Footer Part -->
        <div id="footer">
                    <span><h:outputText value="#{msgs.app_COPYRIGHT}" escape="false" /></span>

                    <div id="footer_logo" title="ferrycode" >
                        <a href="http://www.ferrycode.com" title="ferrycode">
                            <img src="#{facesContext.externalContext.request.contextPath}/themes/office/images/clogo.png" title="ferrycode" alt="ferrycode"/>
                        </a>
                    </div>

         </div>
        <!-- END |  ferrycode Tahrir Office Theme - Footer Part -->
        
        
        <script type="text/javascript">
            A4J.AJAX.onError = function(req,status,message){
                window.status = "#{i18n.Generic_CONNECTION_ERROR_ERROR}: " + message;
                return false;
            }

            A4J.AJAX.onExpired = function(loc,expiredMsg){
                window.status = "#{i18n.Generic_CONNECTION_ERROR_SESSION_EXPIRED}: " + expiredMsg;
                return false;
            }
        </script>

        <rich:modalPanel id="mpLoading" autosized="true" resizeable="false" minHeight="50" minWidth="300" zindex="2000" >
            <h:panelGrid styleClass="pleaseWaitBackground">
                <h:outputText value="#{i18n.Generic_LOADING_PLEASE_WAIT}" styleClass="pleaseWaitMessage" />
                <h:outputText value="&#160;" />
                <h:outputText value="&#160;" />
                <h:outputText value="&#160;" />
                <h:outputText value="&#160;" />
            </h:panelGrid>
        </rich:modalPanel>
    </body>
    </f:view>
</html>