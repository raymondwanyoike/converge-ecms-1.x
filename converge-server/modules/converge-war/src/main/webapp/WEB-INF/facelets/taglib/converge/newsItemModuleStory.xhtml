<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" xmlns:c="http://java.sun.com/jstl/core" xmlns:a4j="http://richfaces.org/a4j" xmlns:rich="http://richfaces.org/rich" xmlns:converge="http://com.interactivemediamanagement.converge/tags">

    <c:if test="#{newsItem.fieldVisible['STORY']}">
        <converge:moduleHeader moduleTitle="#{i18n.NewsItem_STORY}" />
        <div class="moduleContent">
            <rich:editor id="edStory"
                         value="#{value.selectedNewsItem.story}"
                         theme="advanced"
                         customPlugins="EditorPlugins"
                         plugins="safari,spellchecker,inlinepopups,paste,fullscreen,s_textmetrics,print"
                         rendered="true" skin="default" style="margin-left: 1%;" height="400"
                         readonly="#{!newsItem.currentActor || newsItem.readOnly}"
                         dialogType="window" inputElementType="input" onchange="handleFormChanged();">
                <f:param name="theme_advanced_buttons1" value="bold,italic,underline,separator,cut,copy,paste,pastetext,pasteword,separator,bullist,numlist,separator,spellchecker,separator,link,unlink,separator,print,separator,fullscreen"/>
                <f:param name="theme_advanced_buttons2" value=""/>
                <f:param name="theme_advanced_buttons3" value=""/>
                <f:param name="theme_advanced_toolbar_location" value="top"/>
                <f:param name="theme_advanced_toolbar_align" value="left"/>
                <f:param name="theme_advanced_statusbar_location" value="bottom" />
                <f:param name="theme_advanced_resizing" value="true"/>
                <f:param name="spellchecker_languages" value="+English=en" />
                <f:param name="spellchecker_rpc_url" value="spell.check" />
                <f:param name="spellchecker_report_misspellings" value="true" />
                <f:param name="language" value="#{userSession.user.preferredLanguage}" />
                <f:param name="apply_source_formatting" value="false" />
                <f:param name="s_textmetrics_on" value="true" />
                <f:param name="remove_linebreaks" value="false" />
                <f:param name="paste_use_dialog" value="true" />
                <f:param name="paste_auto_cleanup_on_paste" value="true" />
                <f:param name="paste_remove_styles" value="true" />
                <f:param name="paste_remove_styles_if_webkit" value="true" />
                <f:param name="forced_root_block" value="false" />
                <f:param name="verify_html" value="true" />
                <f:param name="fix_list_elements" value="true" />
                <f:param name="width" value="99%" />
                <f:param name="content_css" value="css/wysiwyg.css" />
                <f:param name="gecko_spellcheck" value="true" />
                <f:param name="theme_advanced_path" value="false" />
            </rich:editor>
        </div>
        <converge:moduleSpacer />
    </c:if>

</ui:composition>